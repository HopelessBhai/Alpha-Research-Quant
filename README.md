
# Alpha and Sector Analysis for Stock Data

This project focuses on creating alphas (quantitative signals) and clustering stock data to perform sector momentum analysis using Python. It provides two main classes: `AlphaCheck` for generating alphas based on stock data and `SectorClass` for clustering symbols into sectors and calculating sector momentum.

## Requirements

Ensure you have the following dependencies installed:

```bash
pip install pandas scikit-learn
```

### Dataset
The project assumes that a CSV file named `Merged Df.csv` is present, containing stock data with columns such as `Symbol`, `Date`, `Open`, `Close`, `High`, `Low`, and `Volume`.

## Classes and Methods

### 1. AlphaCheck Class

The `AlphaCheck` class is responsible for creating alphas (quantitative signals) and processing stock data.

#### Methods:
- **`__init__()`**: Initializes the class by loading the dataset and preparing new columns like `ret1`, `ret_1`, `oret`, and `tret`.
- **`neutralize(alpha_col, neut_col='Date', func='mean')`**: Neutralizes the alpha by removing the mean or median, grouped by `neut_col` (default: `Date`).
- **`bucketed_prop(alpha_col, bckt_col='Volume', func='mean', buckets=10)`**: Returns bucketed properties for a given alpha (mean, median, or standard deviation).
- **`check_corr(alpha_col, return_col, bckt_col='Volume', buckets=10)`**: Returns the correlation between the specified alpha and future returns within different buckets (such as volume).
- **`alphaZone()`**: Creates custom alphas (like `alpha_1`, `alpha_2`, `alpha_3`, and `alpha_4`) based on volume and stock price changes.
- **`ret_df()`**: Returns the final processed DataFrame with the newly created alphas.

### 2. SectorClass

The `SectorClass` uses the alphas generated by `AlphaCheck` to perform K-Means clustering on stock symbols and calculates sector momentum.

#### Methods:
- **`__init__()`**: Initializes the class by loading the alpha data and clustering setup.
- **`alpha_matrix(alpha_col)`**: Creates a matrix with dates as columns and stock symbols as rows containing the alpha values for a given alpha column.
- **`cluster_matrix(alpha_col='ret_1', look_back=100, n_clusters=13)`**: Creates a matrix of cluster labels based on the alpha values, using a rolling window (`look_back` days) and a specified number of clusters.
- **`get_clusters(df, date)`**: Returns the clusters and their corresponding symbols for a given date.
- **`new_matrix()`**: Combines the cluster labels with the original data, creating a new DataFrame with both stock data and cluster labels.
- **`mom_matrix()`**: Creates the sector momentum by averaging the `ret_1` returns for each cluster and calculates the residual (the difference between stock returns and sector momentum).
- **`check_corr(alpha_col, return_col, bckt_col='Volume', buckets=10)`**: Similar to `AlphaCheck.check_corr()`, it checks the correlation between the sector momentum and future returns.

## Workflow

1. **Alpha Generation**:
   The `AlphaCheck` class processes the stock data and generates alphas that represent trading signals. These are mathematical formulas based on stock prices, volume, and returns.

2. **Sector Clustering**:
   Using the `SectorClass`, stock symbols are grouped into sectors based on their alpha values using K-Means clustering. This creates clusters of stocks with similar alpha behavior.

3. **Sector Momentum Calculation**:
   The average return (`ret_1`) of stocks within each cluster is calculated to determine the sector momentum, and residuals are calculated by comparing individual stock returns to the sector momentum.

4. **Correlation Analysis**:
   Correlations between the sector momentum and future returns are calculated, helping to analyze the predictive power of the generated alphas.

## Example Usage

```python
# Create alphas and perform sector analysis
alpha = AlphaCheck()
sector = SectorClass()

# Generate alpha matrix and cluster matrix
alpha_matrix = sector.alpha_matrix('ret_1')
cluster_matrix = sector.cluster_matrix()

# Get the clusters for a specific date
clusters = sector.get_clusters(cluster_matrix, '2023-01-01')

# Calculate sector momentum
momentum_matrix = sector.mom_matrix()

# Check correlation of sector momentum with future returns
correlations = sector.check_corr(alpha_col=['Sec_Mom'], return_col='ret_1', bckt_col='Volume', buckets=10)
```

## License

This project is licensed under the MIT License.

